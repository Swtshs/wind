## Hadoop三种环境搭建

### 初始环境准备
1. 运行环境： 三台CentOS 7.4 64位云服务器 hadoop-2.7.2 jdk-8u144-linux-x64
2. 创建新用户并赋予root权限，分别为 hadoop001,hadoop002,hadoop003
```shell
# 创建过程
useradd hadoop001
passwd hadoop001
vi /etc/sudoers # 增加一行 hadoop001    ALL=(ALL)       ALL
su hadoop001
sudo chown -R hadoop001:hadoop001 /opt/software/ /opt/module/
```
3. 配置Java运行环境
```shell
# 解压
tar -zxvf software/jdk-8u144-linux-x64.tar.gz -C module/

# 配置环境变量
sudo vim /etc/profile
# 末尾添加JDK路径
#JAVA_HOME
export JAVA_HOME=/opt/module/jdk1.8.0_144
export PATH=$PATH:$JAVA_HOME/bin

# 刷新并验证是否生效
source /etc/profile && java -version
```
4. 关闭防火墙，关闭云服务器安全组（如果处于同一个内网则不需要关闭安全组）
```shell
systemctl status firewalld.service #防火墙状态
systemctl stop firewalld.service   #停止firewall
```

5. 配置主机名以及远程主机名
> 因为是云服务器，配置本地IP的时候需要配置内网地址，外网才能访问
```bash
sudo vim /etc/hosts

# hadoop001
172.18.15.71 hadoop001 #内
118.126.92.128 hadoop002 #外
106.13.218.136 hadoop003 #外

# hadoop002
47.106.236.32 hadoop001 #外
172.16.0.2 hadoop002 #内
106.13.218.136 hadoop003 #外

# hadoop003
47.106.236.32 hadoop001 #外
118.126.92.128 hadoop002 #外
172.16.0.4 hadoop003 #内
```

### Hadoop软件安装
> 软件下载地址： https://archive.apache.org/dist/hadoop/common/hadoop-2.7.2/

1. 解压：`tar -zxvf software/hadoop-2.7.2.tar.gz -C module/`
2. 修改配置添加环境变量：`sudo vim /etc/profile`
```bash
##HADOOP_HOME
export HADOOP_HOME=/opt/module/hadoop-2.7.2
export PATH=$PATH:$HADOOP_HOME/bin
export PATH=$PATH:$HADOOP_HOME/sbin
```
3. 刷新并验证是否生效：`source /etc/profile && hadoop version`
